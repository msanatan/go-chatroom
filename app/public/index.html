<!DOCTYPE html>
<html>

<head>
    <title>Go Chatroom</title>
    <link rel="shortcut icon" href="https://www.jobsity.com/sites/default/files/logo2.png" type="image/png" />
    <!-- Load required Bootstrap and BootstrapVue CSS -->
    <link type="text/css" rel="stylesheet" href="//unpkg.com/bootstrap/dist/css/bootstrap.min.css" />
    <link type="text/css" rel="stylesheet" href="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.css" />
    <link type="text/css" rel="stylesheet" href="css/style.css" />
    <!-- Load polyfills to support older browsers -->
    <script src="//polyfill.io/v3/polyfill.min.js?features=es2015%2CIntersectionObserver"
        crossorigin="anonymous"></script>
</head>

<body>
    <div id="app">
        <!-- Login view -->
        <div class="container-fluid h-100" v-if="!ws">
            <div class="col-12 form">
                <h2>Registered users</h2>
                <input v-model="user.username" size="sm" class="form-control username" placeholder="username"></input>
                <input v-model="user.password" type="password" class="form-control password"
                    placeholder="password"></input>
                <div class="input-group-append">
                    <span class="input-group-text" @click="login">
                        Login
                    </span>
                </div>
            </div>

            <div class="col-12 form">
                <h2>New users</h2>
                <input v-model="user.email" type="email" class="form-control email" placeholder="email"></input>
                <input v-model="user.username" class="form-control username" placeholder="username"></input>
                <input v-model="user.password" type="password" class="form-control password"
                    placeholder="password"></input>
                <div class="input-group-append">
                    <span class="input-group-text" @click="register">
                        Register
                    </span>
                </div>
            </div>

            <div class="alert alert-danger" role="alert" v-show="authError">
                {{authError}}
            </div>

            <div class="alert alert-success" role="alert" v-show="registerSuccess">
                {{registerSuccess}}
            </div>
        </div>

        <!-- Chat view -->
        <div class="container-fluid h-100" v-if="ws != null">
            <div class="row justify-content-center h-100">
                <div class="col-xl-12 chat">
                    <div class="card">
                        <div class="card-header msg_head">
                            <div class="d-flex bd-highlight justify-content-center">
                                <h3>Chat</h3>
                            </div>
                        </div>
                        <div class="card-body msg_card_body">
                            <div v-for="(message, key) in messages" :key="key"
                                class="d-flex justify-content-start mb-4">
                                <div class="msg_cotainer">
                                    {{message.message}}
                                    <span class="msg_time"></span>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer">
                            <div class="input-group">
                                <textarea v-model="newMessage" name="" class="form-control type_msg"
                                    placeholder="Type your message..." @keyup.enter.exact="sendMessage"></textarea>
                                <div class="input-group-append">
                                    <span class="input-group-text send_btn" @click="sendMessage">></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

<!-- Load Vue followed by BootstrapVue -->
<script src="https://unpkg.com/vue"></script>
<script src="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="js/app.js"></script>

</html>